<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">


<dom-module id="reg-app">

  <template>
     <iron-ajax id='regions' method="GET" handle-as="json" on-response="_handleRegionResponse" debounce-duration="0" on-error="_onRegionErrorRequest"></iron-ajax>
     <iron-ajax id='districts' method="GET" handle-as="json" on-response="_handleDistrictResponse" debounce-duration="0" on-error="_onDistrictErrorRequest"></iron-ajax>
     
     <iron-ajax id='regions2' method="GET" handle-as="json" on-response="_handleRegion2Response" debounce-duration="0" on-error="_onRegion2ErrorRequest"></iron-ajax>
     <iron-ajax id='districts2' method="GET" handle-as="json" on-response="_handleDistrict2Response" debounce-duration="0" on-error="_onDistrict2ErrorRequest"></iron-ajax>

     <iron-ajax id='programme' method="GET" handle-as="json" on-response="_handleProgrammeResponse" debounce-duration="0" on-error="_onProgrammeErrorRequest"></iron-ajax>
     <iron-ajax id='register' method="POST" handle-as="json" content-type="application/json" on-response="_handleRegisterResponse" debounce-duration="0" on-error="_onRegisterErrorRequest"></iron-ajax>

     <iron-ajax id='validateEmail' method="GET" handle-as="json" on-response="_handleValidateEmailResponse" debounce-duration="0" on-error="_onValidateEmailErrorRequest"></iron-ajax>
     <iron-ajax id='validatePhone' method="GET" handle-as="json" on-response="_handleValidePhoneResponse" debounce-duration="0" on-error="_onValidatePhoneErrorRequest"></iron-ajax>
     <iron-ajax id='validateId' method="GET" handle-as="json" on-response="_handleValideIdResponse" debounce-duration="0" on-error="_onIdErrorRequest"></iron-ajax>
     <iron-ajax id='validateEzwich' method="GET" handle-as="json" on-response="_handleValideEzwichResponse" debounce-duration="0" on-error="_onEzwichErrorRequest"></iron-ajax>
     <iron-ajax id='sicks' method="GET" handle-as="json" on-response="_handleSickResponse" debounce-duration="0" on-error="_onSickErrorRequest"></iron-ajax>
     <iron-ajax id='date' method="GET" handle-as="json" on-response="_handleDateResponse" debounce-duration="0" on-error="_onDateErrorRequest"></iron-ajax>

    <style>
      :host {
        display: block;
      }

      .ezwich-style{width: 64px; padding-bottom: 5px;}
      .custom-hide{display: none;}
      .review{font-size: 15px;color: #b71c1c;font-weight: 600;}
      .info-container-style{background: #ffcdd2;padding-bottom: 10% !important;padding-top: 10% !important;}  
      .pad-zero{padding: 0px !important;}  
      .agree-btn{background: #2e7d32; color: #EAEAEA;}
      .nxt-btn{background: #2e7d32 !important; color: #EAEAEA !important; border-color: #2e7d32 !important;}
      .error-style{color: #c62828;}
    </style>
    <link href="../../bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link href="../../bower_components/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link rel="stylesheet" href="../../assets/css/elephant.min.css">

    <div id="page" class="container">

      <div id="info_page" class="row info-container-style">
        <div class="col-sm-6 col-sm-offset-3">
          <div class="row">
            <br/>
            <div class="col-sm-6 col-sm-offset-3">
              <img src="../../assets/img/yea.png">
            </div>

            <br/>
            <br/>
            <br/>
          </div>

          <div class="row">
            <div class="col-sm-9 col-sm-offset-1">
              <br/>
              <p>1. An applicant in an existing or running module cannot apply.</p>
              <p>2. An applicant must be between the ages of 18-35 years. </p>
              <p>3. An applicant shall provide accurate and verifiable information about himself / herself.</p>
              <p>4. YEA reserves the sole right to shortlist and engage an applicant.</p>
              <p>5. Successful application does not guarantee engagement</p>
              <p>6. With effect from 4TH July, 2017 , an applicant is deemed engaged upon receipt of a valid and verifiable engagement letter from YEA</p>
              <p>7. To complete the registration, an applicant must have:</p>
              <p>a) An E-zwich card  (The name on the E-zwich card must be the same as the name used in the registration)</p>
              <p>b) A phone number</p>
              <br/>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-6">
              <button class="btn btn-primary btn-block btn-next" type="button" on-click="_onDecline">I Decline</button>
            </div>
            <div class="col-sm-6">
              <button class="btn agree-btn btn-block btn-next" type="button" on-click="_onAgree">I Agree</button>
            </div>
          </div>
        </div>

      </div>

      <form id="form_wizard" data-toggle="validator" novalidate="novalidate" style="display:none;">
          <ul class="steps">
            <li class="step col-xs-2">
              <a class="step-segment" href="#step-1" data-toggle="tab">
                <span id="step1_wiz" class="step-icon">1</span>
              </a>
              <div class="step-content">
                <strong class="hidden-xs">Basic Information</strong>
              </div>
            </li>
            <li class="step col-xs-2">
              <a class="step-segment" href="#step-2" data-toggle="tab">
                <span id="step2_wiz" class="step-icon">2</span>
              </a>
              <div class="step-content">
                <strong class="hidden-xs">Personal Information</strong>
              </div>
            </li>
            <li class="step col-xs-2">
              <a class="step-segment" href="#step-3" data-toggle="tab">
                <span id="step3_wiz" class="step-icon">3</span>
              </a>
              <div class="step-content">
                <strong class="hidden-xs">Work Preference</strong>
              </div>
            </li>
            <li class="step col-xs-2">
              <a class="step-segment" href="#step-4" data-toggle="tab">
                <span id="step4_wiz" class="step-icon">4</span>
              </a>
              <div class="step-content">
                <strong class="hidden-xs">Account Details</strong>
              </div>
            </li>
            <li class="step col-xs-2">
              <a class="step-segment" href="#step-4" data-toggle="tab">
                <span id="step5_wiz" class="step-icon">5</span>
              </a>
              <div class="step-content">
                <strong class="hidden-xs">Review</strong>
              </div>
            </li>
            <li class="step col-xs-2">
              <a class="step-segment" href="#step-4" data-toggle="tab">
                <span id="step6_wiz" class="step-icon">6</span>
              </a>
              <div class="step-content">
                <strong class="hidden-xs">Receipt</strong>
              </div>
            </li>
          </ul>
          <div class="tab-content" style="margin-top: 15px !important;">

            <div id="step1" class="tab-pane custom-hide">
              <h4 class="text-center m-y-md">
                <span>Basic Information</span>
              </h4>

              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                  <div class="form-group">
                    <div class="col-sm-9 col-sm-offset-3">
                      <label id="error_container1" class="error-style"></label>
                    </div>
                  </div>
                </div>
              </div>

              <br/>

              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="programme_control">Programme</label>
                    <div class="col-sm-9">
                      <select id="programme_control" class="form-control custom-select">
                        <option value="0">- Select Module -</option>
                        <template is="dom-repeat" items="{{programmes}}" mutable-data>
                          <option value='{{item.id}}'>{{item.name}}</option>
                        </template>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="fname" class="control-label col-sm-3">First Name</label>
                    <div class="col-sm-9">
                      <input id="fname" class="form-control" type="text" name="fname" spellcheck="false" autocomplete="off" >
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="mname" class="control-label col-sm-3">Middle Name</label>
                    <div class="col-sm-9">
                      <input id="mname" class="form-control" type="text" name="mname" spellcheck="false" autocomplete="off" >
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="lname" class="control-label col-sm-3">Last Name</label>
                    <div class="col-sm-9">
                      <input id="lname" class="form-control" type="text" name="lname" spellcheck="false" autocomplete="off" >
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="region_control">Regions</label>
                    <div class="col-sm-9">
                      <select id="region_control" class="form-control custom-select" on-change="_onRegionChanged">
                        <option value="0">- Select Region -</option>
                        <template is="dom-repeat" items="{{regions}}" mutable-data>
                          <option value='{{item.id}}'>{{item.name}}</option>
                        </template>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="district_control">Districts</label>
                    <div class="col-sm-9">
                      <select id="district_control" class="form-control custom-select">
                        <option value="0">- Select District -</option>
                        <template is="dom-repeat" items="{{districts}}" mutable-data>
                          <option value='{{item.id}}'>{{item.name}}</option>
                        </template>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="town" class="control-label col-sm-3">Town</label>
                    <div class="col-sm-9">
                      <input id="town" class="form-control" type="text" name="town" spellcheck="false" autocomplete="off" >
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="phone" class="control-label col-sm-3">Phone</label>
                    <div class="col-sm-9">
                      <input id="phone" class="form-control" type="text" name="phone" spellcheck="false" autocomplete="off">
                    </div>
                  </div>

                  <div class="form-group">
                    <button class="btn btn-primary btn-block btn-next nxt-btn" type="button" on-click="_onMoveOne">Next</button>
                  </div>
                  
                </div>
              </div>
            </div>

            <div id="step2" class="tab-pane custom-hide">

              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                  <div class="form-group">
                    <div class="col-sm-9 col-sm-offset-3">
                      <label id="error_container2" class="error-style"></label>
                    </div>
                  </div>
                </div>
              </div>

              <br/>

              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                  <div class="form-group">
                    <label class="col-sm-3 control-label">Gender</label>
                    <div class="col-sm-9">
                      <div class="radio col-sm-6">
                        <label>
                          <input id="m_check" type="radio" name="gender" value="M"> Male
                        </label>
                      </div>
                      <div class="radio col-sm-6" style="margin-top: 10px !important; margin-bottom: 0 !important;">
                        <label>
                          <input id="f_check" type="radio" name="gender" value="F"> Female
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                   <label class="col-sm-3 control-label" for="dob">Date of Birth</label>
                   <div class="col-sm-9">

                    <div class="col-sm-4 pad-zero">
                      <select id="month_list" class="form-control custom-select" on-change="_onMonthChange">
                         <option value="0">- Month -</option>
                         <option value="01">January</option>
                         <option value="02">Febuary</option>
                         <option value="03">March</option>
                         <option value="04">April</option>
                         <option value="05">May</option>
                         <option value="06">June</option>
                         <option value="07">July</option>
                         <option value="08">August</option>
                         <option value="09">September</option>
                         <option value="10">October</option>
                         <option value="11">November</option>
                         <option value="12">December</option>
                       </select> 
                    </div>

                     <div class="col-sm-4 pad-zero">
                       <select id="day_list" class="form-control custom-select">
                         <option value="0">- Day -</option>
                         <template is="dom-repeat" items="{{days}}" mutable-data>
                           <option value="{{item.val}}">{{item.num}}</option>
                         </template>
                       </select>                      
                     </div>
                     
                     <div class="col-sm-4 pad-zero">
                       <select id="year_list" class="form-control custom-select">
                         <option value="0">- Year -</option>
                         <option value="2002">2002</option>
                         <option value="2001">2001</option>
                         <option value="2000">2000</option>
                         <option value="1999">1999</option>
                         <option value="1998">1998</option>
                         <option value="1997">1997</option>
                         <option value="1996">1996</option>
                         <option value="1995">1995</option>
                         <option value="1994">1994</option>
                         <option value="1993">1993</option>
                         <option value="1992">1992</option>
                         <option value="1991">1991</option>
                         <option value="1990">1990</option>
                         <option value="1989">1989</option>
                         <option value="1988">1988</option>
                         <option value="1987">1987</option>
                         <option value="1986">1986</option>
                         <option value="1985">1985</option>
                         <option value="1984">1984</option>
                         <option value="1983">1983</option>
                         <option value="1982">1982</option>
                       </select>  
                     </div>
                   </div>
                 </div>

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="level">Literate/Illiterate</label>
                    <div class="col-sm-9">
                      <select id="level" class="form-control custom-select">
                        <option value="zero">- Select -</option>
                        <option value="None">NONE</option>\
                        <option value="BECE">BECE</option>
                        <option value="SSCE/WASSCE">SSCE/WASSCE</option>
                        <option value="Technical">Technical</option>
                        <option value="Vocational">Vocational</option>
                        <option value="Diploma">Diploma</option>
                        <option value="HND">HND</option>
                        <option value="Bachelor Degree">Bachelor Degree</option>
                        <option value="Masters">Masters</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="m_status">Marital Status</label>
                    <div class="col-sm-9">
                      <select id="m_status" class="form-control custom-select" on-change="_onMaritalStatusChanged">
                        <option value="none">- Select -</option>
                        <option value="Married">Married</option>
                        <option value="Single">Single</option>
                        <option value="Divorced">Divorced</option>
                      </select>
                    </div>
                  </div>

                  <div id="spouse_control" class="form-group" style="display:none;">
                    <label for="spouse" class="col-sm-3 control-label">Spouse Name</label>
                    <div class="col-sm-9">
                    <input id="spouse" class="form-control" type="text" name="spouse">
                    </div>
                  </div>

                  <div class="form-group" >
                    <label class="col-sm-3 control-label" for="sick">Any Form of Disability</label>
                    <div class="col-sm-9">
                      <select id="sick" class="form-control custom-select" on-change="_onSickChanged">
                        <option value="none">- Select -</option>
                        <option value="YES">YES</option>
                        <option value="NO">NO</option>
                      </select>
                    </div>
                  </div>

                   <div id="sick_box" class="form-group" style="display:none;">
                    <label class="col-sm-3 control-label" for="sick">Disability</label>
                    <div class="col-sm-9">
                      <select id="sick_list" class="form-control custom-select">
                         <option value="0">- Select -</option>
                         <template is="dom-repeat" items="{{sicks}}" mutable-data>
                            <option value='{{item.id}}'>{{item.name}}</option>
                        </template>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="id_type">Identification Type</label>
                    <div class="col-sm-9">
                      <select id="id_type" class="form-control custom-select">
                        <option value="none">- Select -</option>
                        <option value="VOTERS">Voters</option>
                        <option value="NHIS">NHIS</option>
                        <option value="DRIVERS">Drivers Licence</option>
                        <option value="PASSPORT">Passport</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="idn" class="col-sm-3 control-label">Identification Number</label>
                    <div class="col-sm-9">
                    <input id="idn" class="form-control" type="text" name="idn" placeholder="eg. 3435560098">
                    </div>
                  </div>

                  <br/>
                  <div class="form-group">
                    <div class="col-sm-6">
                      <button class="btn btn-primary btn-block btn-next" type="button" on-click="_onMoveTwoBack">Back</button>
                    </div>
                    <div class="col-sm-6">  
                      <button class="btn btn-primary btn-block btn-next nxt-btn" type="button" on-click="_onMoveTwo">Next</button>
                    </div>
                  </div>

              </div>
            </div>
              
            </div>


           <div id="step3" class="tab-pane custom-hide">


              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                  <div class="form-group">
                    <div class="col-sm-9 col-sm-offset-3">
                      <label id="error_container3" class="error-style"></label>
                    </div>
                  </div>
                </div>
              </div>

              <br/>
              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                  <div class="form-group">
                    <div class="col-sm-9 col-sm-offset-3">
                      <label id="error_container3" class="error-style"></label>
                    </div>
                  </div>
                </div>
              </div>

              <br/>

              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">

                   <div class="form-group">
                    <label class="col-sm-3 control-label" for="region_control_2">Module</label>
                    <div class="col-sm-9">
                    <label>{{user.module}}</label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="region_control_2">Regions</label>
                    <div class="col-sm-9">
                      <select id="region_control_2" class="form-control custom-select" on-change="_onRegion2Changed">
                        <option value="0">- Select Region -</option>
                        <template is="dom-repeat" items="{{regions2}}" mutable-data>
                          <option value='{{item.id}}'>{{item.name}}</option>
                        </template>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="district_control_2">Districts</label>
                    <div class="col-sm-9">
                      <select id="district_control_2" class="form-control custom-select">
                        <option value="0">- Select District -</option>
                        <template is="dom-repeat" items="{{districts2}}" mutable-data>
                          <option value='{{item.id}}'>{{item.name}}</option>
                        </template>
                      </select>
                    </div>
                  </div>

                  <br/>
                  <div class="form-group">
                    <div class="col-sm-6">
                      <button class="btn btn-primary btn-block btn-next" type="button" on-click="_onMoveThreeBack">Back</button>
                    </div>
                    <div class="col-sm-6">
                      <button class="btn btn-primary btn-block btn-next nxt-btn" type="button" on-click="_onMoveThree">Next</button>
                    </div>
                  </div>
                  
              </div>
            </div>   
              
          </div>

          <div id="step4" class="tab-pane custom-hide">
              <h4 class="text-center m-y-md">
                <span>Enter your account details</span>
              </h4>

              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                  <div class="form-group">
                    <div class="col-sm-9 col-sm-offset-3">
                      <label id="error_container4" class="error-style"></label>
                    </div>
                  </div>
                </div>
              </div>

              <br/>
              <div class="row">
                <div class="col-sm-8 col-sm-offset-2">

                  <div class="form-group">
                    
                    <div class="col-sm-9 col-sm-offset-3">
                      <label>Please do NOT include the dash ('-')</label>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-sm-3 control-label">
                      <img class="ezwich-style" src="../../assets/img/ezwich.png">
                    </div>
                    <div class="col-sm-9">
                      <input id="ezw" class="form-control" type="text" name="ezw" placeholder="Enter Ezwich Number">
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="ezw2" class="control-label col-sm-3">Confirm Card Number</label>
                    <div class="col-sm-9">
                      <input id="ezw2" class="form-control" type="text" name="creditcard_number_2" placeholder="Confirm Ezwich Number">
                    </div>
                  </div>
                 
                  <br/>
                  <div class="form-group">
                    <div class="col-sm-6">
                      <button class="btn btn-primary btn-block btn-next" type="button"  on-click="_onMoveFourBack">Back</button>
                    </div>
                    <div class="col-sm-6">
                      <button class="btn btn-primary btn-block btn-next nxt-btn" type="button" on-click="_onMoveFour">Review</button>
                    </div>
                  </div>
                  
                </div>
              </div>
            </div>

          <div id="step5" class="tab-pane custom-hide">

            <div class="row">
             
              <div class="col-sm-8 col-sm-offset-2">

                <div class="form-group">
                    <label class="control-label" for="review_name">Name</label>
                    <div id="review_name" name="review_name" class="review">{{user.fname}} {{user.lname}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Date of Birth</label>
                    <div id="review_dob" name="review_dob" class="review">{{user.dob}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">District</label>
                    <div id="review_district" name="review_district" class="review">{{user.district}}</div>
                </div>

                 <div class="form-group">
                    <label class="control-label">Town</label>
                    <div id="review_town" name="review_town" class="review">{{user.town}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Pref. Work District</label>
                    <div id="review_district" name="review_pref_district" class="review">{{user.district}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Module</label>
                    <div id="review_module" name="review_module" class="review">{{user.module}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Identification Type</label>
                    <div id="review_type" name="review_type" class="review">{{user.id_type}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Identification Number</label>
                    <div id="review_idn" name="review_idn" class="review">{{user.id_number}}</div>
                </div>

                <div class="form-group">
                    <label class="ontrol-label">EZWICH</label>
                    <div id="review_ezwich" class="review">{{user.ezwich}}</div>
                </div>

                <br/>
                <div class="form-group">
                  <div class="col-sm-6">
                    <button class="btn btn-primary btn-block btn-next" type="button" on-click="_onRegisterBack">Back</button>
                  </div>
                  <div class="col-sm-6">
                    <button class="btn btn-primary btn-block btn-next nxt-btn" type="button" on-click="_onRegister">Register</button>
                  </div>
                </div>
                
            </div>
          </div>
            
            
        </div>


         <div id="step6" class="tab-pane custom-hide">

            <div class="row">

               <div class="col-sm-3">
                  <img src="../../assets/img/yea.png">
              </div>


              <div class="col-sm-9">

                <div class="form-group">
                  <div class="col-sm-12 control-label" for="region_control" style="font-size: 25px; padding: 0 !important;">Congratulations {{user.fname}} ....</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Name</label>
                    <div id="review_name" name="review_name" class="review">{{user.fname}} {{user.mname}} {{user.lname}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Date of Birth</label>
                    <div id="review_dob" name="review_dob" class="review">{{user.dob}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">District</label>
                    <div id="review_district" name="review_district" class="review">{{user.personal_district}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Town</label>
                    <div id="review_town" name="review_town" class="review">{{user.town}}</div>
                </div>

                 <div class="form-group">
                    <label class="control-label">Pref. Work District</label>
                    <div id="review_district" name="review_pref_district" class="review">{{user.district}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Module</label>
                    <div id="review_module" name="review_module" class="review">{{user.module}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Identification Type</label>
                    <div id="review_type" name="review_type" class="review">{{user.id_type}}</div>
                </div>

                <div class="form-group">
                    <label class="control-label">Identification Number</label>
                    <div id="review_idn" name="review_idn" class="review">{{user.id_number}}</div>
                </div>

                <div class="form-group">
                  <label class="ontrol-label">EZWICH</label>
                  <div id="review_ezwich" class="review">{{user.ezwich}}</div>
                </div>

                 <div class="form-group">
                  <label class="ontrol-label">Date of Registration</label>
                  <div class="review">{{user.reg_date}}</div>
                </div>

                 <div class="form-group">
                  <label class="ontrol-label">Registration Number</label>
                  <div class="col-sm-12 control-label" for="region_control" style="font-size: 25px; padding: 0 !important;">{{user.yea_id}}</div>
                </div>

                

                <div class="form-group">
                  <svg id="barcode"></svg>
                </div>

                <div class="form-group">
                  <div class="col-sm-6" style="padding:0px !important;">
                    <button class="btn btn-success btn-block btn-next nxt-btn" type="button" on-click="_onPrint">Print</button>
                  </div>
                </div>

              </div>
           </div>
          </div>


          </div>
        </form>
      </div>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class RegApp extends Polymer.Element {
      connectedCallback(){
        super.ready();

        this.$.step1.style = 'display:block;';
        this.$.step1_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;'

        this._loadAllRegions();
        this._loadAllRegions2();

        this._loadAllProgrammes();
        this.user.mname = '';
        this.default_days1 = [{num : 1, val : 1},{num : 2, val : 2},{num : 3, val : 3},{num : 4, val : 4},{num : 5, val : 5},{num : 6, val : 6},{num : 7, val : 7},{num : 8, val : 8},{num : 9, val : 9},{num : 10, val : 10},{num : 11, val : 11},{num : 12, val : 12},{num : 13, val : 13},{num : 14, val : 14},{num : 15, val : 15},{num : 16, val : 16},{num : 17, val : 17},{num : 18, val : 18},{num : 19, val : 19},{num : 20, val : 20},{num : 21, val : 21},{num : 22, val : 22},{num : 23, val : 23},{num : 24, val : 24},{num : 25, val : 25},{num : 26, val : 26},{num : 27, val : 27},{num : 28, val : 28},{num : 29, val : 29}];

        this.default_days2 = [{num : 1, val : 1},{num : 2, val : 2},{num : 3, val : 3},{num : 4, val : 4},{num : 5, val : 5},{num : 6, val : 6},{num : 7, val : 7},{num : 8, val : 8},{num : 9, val : 9},{num : 10, val : 10},{num : 11, val : 11},{num : 12, val : 12},{num : 13, val : 13},{num : 14, val : 14},{num : 15, val : 15},{num : 16, val : 16},{num : 17, val : 17},{num : 18, val : 18},{num : 19, val : 19},{num : 20, val : 20},{num : 21, val : 21},{num : 22, val : 22},{num : 23, val : 23},{num : 24, val : 24},{num : 25, val : 25},{num : 26, val : 26},{num : 27, val : 27},{num : 28, val : 28},{num : 29, val : 29},{num : 30, val : 30}];

        this.default_days3 = [{num : 1, val : 1},{num : 2, val : 2},{num : 3, val : 3},{num : 4, val : 4},{num : 5, val : 5},{num : 6, val : 6},{num : 7, val : 7},{num : 8, val : 8},{num : 9, val : 9},{num : 10, val : 10},{num : 11, val : 11},{num : 12, val : 12},{num : 13, val : 13},{num : 14, val : 14},{num : 15, val : 15},{num : 16, val : 16},{num : 17, val : 17},{num : 18, val : 18},{num : 19, val : 19},{num : 20, val : 20},{num : 21, val : 21},{num : 22, val : 22},{num : 23, val : 23},{num : 24, val : 24},{num : 25, val : 25},{num : 26, val : 26},{num : 27, val : 27},{num : 28, val : 28},{num : 29, val : 29},{num : 30, val : 30},{num : 31, val : 31}];

        this.days = [];
        this.$.day_list.disabled = true;
      }

      static get is() { return 'reg-app'; }
      static get properties() {
        return {
          user: {
            type: Object,
            value : {},
            notify: true
          }
        };
      }

      _step1Error(msg){
        this.$.error_container1.innerText = msg;
      }

      _step2Error(msg){
        this.$.error_container2.innerText = msg;
      }

      _step3Error(msg){
        this.$.error_container3.innerText = msg;
      }

      _step4Error(msg){
        this.$.error_container4.innerText = msg;
      }

      _loadAllRegions(){
        this.$.regions.url = config.baseUrl+'/regions';
        this.$.regions.generateRequest();
      }

       _loadAllRegions2(){
        this.$.regions2.url = config.baseUrl+'/regions';
        this.$.regions2.generateRequest();
      }

       _loadDistricts(region_id){
        this.$.districts.url = config.baseUrl+'/districts/region/'+region_id;
        this.$.districts.generateRequest();
      }

       _loadDistricts2(region_id){
        this.$.districts2.url = config.baseUrl+'/districts/region/'+region_id;
        this.$.districts2.generateRequest();
      }

       _loadAllProgrammes(){
        this.$.programme.url = config.baseUrl+'/programs/';
        this.$.programme.generateRequest();
      }

      _loadAllSicks(){
        this.$.sicks.url = config.baseUrl+'/sicks/';
        this.$.sicks.generateRequest();
      }

      _saveDetails(){
        this.$.register.url = config.baseUrl+'/register/';
        this.$.register.body = this.user;
        this.$.register.generateRequest();
      }

      _validatePhone(){
        this.$.validatePhone.url = config.baseUrl+'/members/msisdn/'+this.user.msisdn;
        this.$.validatePhone.generateRequest();
      }

      _validateEmail(){
        this.$.validateEmail.url = config.baseUrl+'/members/email/'+this.user.email;
        this.$.validateEmail.generateRequest();
      }

      _validateID(){
        this.$.validateId.url = config.baseUrl+'/members/idn/'+this.user.id_number;
        this.$.validateId.generateRequest();
      }

      _validateEzwich(){
        this.$.validateEzwich.url = config.baseUrl+'/members/ezwich/'+this.user.ezwich;
        this.$.validateEzwich.generateRequest();
      }

      _onMoveOne(e){
        //Validate inputs
        var app = this;

        if(parseInt(this.$.programme_control.value) > 0){
          this.user.program_id = this.$.programme_control.value;
          this._showNormal(this.$.programme_control);

          this.user.module = _.find(this.programmes, function(item){return item.id == app.user.program_id}).name;
          this.notifyPath('user.module');
        }else{
          this._showError(this.$.programme_control);
          this._step1Error('Please select a module');
          return;
        }

        if(this.$.fname.value.length >= 3 &&  !is_alpha_numeric(this.$.fname.value)){
          this._showNormal(this.$.fname);

          this.user.fname = this.$.fname.value;
          this.notifyPath('user.fname');
        }else{
          this._showError(this.$.fname);
          this._step1Error('First Name cannot be empty');
          return;
        }

        if(this.$.lname.value.length >= 3 &&  !is_alpha_numeric(this.$.lname.value)){
          this._showNormal(this.$.lname);

          this.user.lname = this.$.lname.value;
          this.notifyPath('user.lname');

        }else{
          this._showError(this.$.lname);
          this._step1Error('Last Name cannot be empty');
          return;
        }

        if(this.$.mname.value.length >= 3 &&  !is_alpha_numeric(this.$.mname.value)){
          this._showNormal(this.$.mname);

          this.user.mname = this.$.mname.value;
          this.notifyPath('user.mname');

        }else{
          this._showWarning(this.$.mname);
        }

        if(parseInt(this.$.region_control.value) > 0){
          this.user.personal_region_id = this.$.region_control.value;
          this._showNormal(this.$.region_control);
        }else{
          this._showError(this.$.region_control);
          this._step1Error('Please select a region');
          return;
        }

        if(parseInt(this.$.district_control.value) > 0){
          this.user.personal_district_id = this.$.district_control.value;
          this._showNormal(this.$.district_control);

          this.user.personal_district = _.find(this.districts, function(item){return item.id == app.user.personal_district_id}).name;
          this.notifyPath('user.personal_district');
        }else{
          this._showError(this.$.district_control);
          this._step1Error('Please select a district');
          return;
        }

        if(this.$.town.value.length >= 2){
          this._showNormal(this.$.town);

          this.user.town = this.$.town.value;
          this.notifyPath('user.town');

        }else{
          this._showError(this.$.town);
          this._step1Error('Please select a town');
          return;
        }

        if(this.$.phone.value){
          if(is_phone_valid(this.$.phone.value)){
            this._showNormal(this.$.phone);

            this.user.msisdn = this.$.phone.value;
            this.notifyPath('user.msisdn');

          }else{
            this._showError(this.$.phone);
            this._step1Error('Phone number is invalid');
            return;
          }
        }

        //Validate email and phone

        this._loadAllSicks();

        
        this.$.step1.style = '';
        this.$.step1_wiz.style = '';

        this.$.step2.style = 'display:block';
        this.$.step2_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
        

        // this.$.step1.style = '';
        // this.$.step1_wiz.style = '';

        // this.$.step2.style = 'display:block';
        // this.$.step2_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
      }

      _onMoveTwo(e){
        //Validate inputs
        var app = this;

        if(this.$.m_check.checked){
          this.user.gender = 'MALE';
        }else if(this.$.f_check.checked){
          this.user.gender = 'FEMALE';
        }else{
          return;
        }

        this.notifyPath('user.gender');


        if(parseInt(this.$.day_list.value) > 0){
          this._showNormal(this.$.day_list);
          this.user.day = this.$.day_list.value;
          this.notifyPath('user.day');
        }else{
          this._showError(this.$.day_list);
          this._step2Error('Please select day');
          return;
        }

        if(parseInt(this.$.month_list.value) > 0){
          this._showNormal(this.$.month_list);
          this.user.month = this.$.month_list.value;
          this.notifyPath('user.month');
        }else{
          this._showError(this.$.month_list);
          this._step2Error('Please select month');
          return;
        }

        if(parseInt(this.$.year_list.value) > 0){
          this._showNormal(this.$.year_list);
          this.user.year = this.$.year_list.value;
          this.notifyPath('user.year');
        }else{
          this._showError(this.$.year_list);
          this._step2Error('Please select year');
          return;
        }

        this.user.dob = this.user.year+'-'+this.user.month+'-'+this.user.day;
        this.notifyPath('user.dob');

        if(this.$.level.value != 'zero'){
          this.user.literacy_level = this.$.level.value;
          this._showNormal(this.$.level);
          console.log(this.user.literacy_level);
          this.notifyPath('user.literacy_level');
        }else{
          this._showError(this.$.level);
          this._step2Error('Please select literacy level');
          return;
        }

        if(this.$.m_status.value != 'none'){
          this.user.m_status = this.$.m_status.value;
          this._showNormal(this.$.m_status);
          console.log(this.user.m_status);

          this.notifyPath('user.m_status');
        }else{
          this._showError(this.$.m_status);
          this._step2Error('Please select marital status');
          return;
        }

        if(this.$.sick.value != 'none'){
          this.user.is_disabled = this.$.sick.value;
          this._showNormal(this.$.sick);
          this.notifyPath('user.is_disabled');

          if(this.$.sick.value == 'YES'){
            if(parseInt(this.$.sick_list.value) > 0){
              this._showNormal(this.$.sick_list);
              this.user.sick_id = this.$.sick_list.value;
            }else{
              this._showError(this.$.sick_list);
              this._step2Error('Please select specific disability');
              return;
            }
          }

        }else{
          this._showError(this.$.sick);
          this._step2Error('Please answer disability question');
          return;
        }

        if(this.$.id_type.value != 'none'){
          this.user.id_type = this.$.id_type.value;
          this._showNormal(this.$.id_type);
          console.log(this.$.id_type.value);
          this.notifyPath('user.id_type');
        }else{
          this._showError(this.$.id_type);
          this._step2Error('Please select ID type');
          return;
        }

        // if(this.$.idn.value.length > 6){
        //   this.user.id_number = this.$.idn.value;
        //   this._showNormal(this.$.idn);
        //   console.log(this.$.idn.value);
        //   this.notifyPath('user.id_number');
        // }else{
        //   this._showError(this.$.idn);
        //   this._step2Error('ID number invalid');
        //   return;
        // }

        if(this.$.idn.value.length > 7){

          if(this.$.id_type.value == 'VOTERS' && is_valid_voter(this.$.idn.value)){
            this._showNormal(this.$.idn);
          }else if(this.$.id_type.value == 'NHIS' && is_valid_nhis(this.$.idn.value)){
            this._showNormal(this.$.idn);
          }else if(this.$.id_type.value == 'PASSPORT' && is_valid_passport(this.$.idn.value)){
            this._showNormal(this.$.idn);
          }else if(this.$.id_type.value == 'DRIVERS'){
            this._showNormal(this.$.idn);
          }else{
            this._showError(this.$.idn);
            return;
          }
        }else{
          this._showError(this.$.idn);
          this._step2Error('ID number invalid');
          return;
        }

        this.user.id_number = this.$.idn.value;
        this.notifyPath('user.id_number');


        this._validateID();

        // this.$.step2.style = '';
        // this.$.step2_wiz.style = '';

        // this.$.step3.style = 'display:block;';
        // this.$.step3_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
      }

       _onMoveTwoBack(e){
          this.$.step2.style = '';
          this.$.step2_wiz.style = '';

          this.$.step1.style = 'display:block';
          this.$.step1_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
      }

      _onMoveThree(e){
        var app = this;
        if(parseInt(this.$.region_control_2.value) > 0){
          this.user.region_id = this.$.region_control_2.value;
          this._showNormal(this.$.region_control_2);
        }else{
          this._showError(this.$.region_control_2);
          this._step3Error('Please select a region');
          return;
        }

        if(parseInt(this.$.district_control_2.value) > 0){
          this.user.district_id = this.$.district_control_2.value;
          this._showNormal(this.$.district_control_2);

          this.user.district = _.find(this.districts2, function(item){return item.id == app.user.district_id}).name;
          this.notifyPath('user.district');
        }else{
          this._showError(this.$.district_control_2);
          this._step3Error('Please select a district');
          return;
        }

        this.$.step3.style = '';
        this.$.step3_wiz.style = '';

        this.$.step4.style = 'display:block;';
        this.$.step4_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';

      }

      _onMoveThreeBack(e){
        this.$.step3.style = '';
        this.$.step3_wiz.style = '';

        this.$.step2.style = 'display:block;';
        this.$.step2_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
      }

      _onMoveFour(){
        if(is_valid_ezwich(this.$.ezw.value) && is_valid_ezwich(this.$.ezw2.value)){
            if(this.$.ezw.value === this.$.ezw2.value){
              this.user.ezwich = this.$.ezw.value;
              this._showNormal(this.$.ezw);
              this._showNormal(this.$.ezw2);

              this.notifyPath('user.ezwich');
            }else{
              this._showError(this.$.ezw);
              this._showError(this.$.ezw2);
              this._step4Error('Please specific a valid EZWICH number');
              return;
            }
        }else{
          this._showError(this.$.ezw);
          this._showError(this.$.ezw2);

          return;
        }

        this._validateEzwich();

        // this.$.step4.style = '';
        // this.$.step4_wiz.style = '';

        // this.$.step5.style = 'display:block;';
        // this.$.step5_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
      }

      _onMoveFourBack(e){
         this.$.step4.style = '';
        this.$.step4_wiz.style = '';

        this.$.step3.style = 'display:block;';
        this.$.step3_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
      }

      _showError(element){
        if(element){
          element.style = 'border: 1px solid #c62828';
        }
      }

      _showWarning(element){
        if(element){
          element.style = 'border: 1px solid #f9a825';
        }
      }

      _showNormal(element){
        if(element){
          element.style = 'border: 1px solid #ddd';
        }
      }

      _handleRegionResponse(e){
        console.log(JSON.stringify(e.detail.response));
        this.set('regions', e.detail.response);
      }

       _handleRegion2Response(e){
        console.log(JSON.stringify(e.detail.response));
        this.set('regions2', e.detail.response);
      }

      _onRegionErrorRequest(e){

      }

      _handleDistrictResponse(e){
        console.log(JSON.stringify(e.detail.response));
        this.set('districts', e.detail.response);

        this._loadAllProgrammes();
      }

      _handleDistrict2Response(e){
        console.log(JSON.stringify(e.detail.response));
        this.set('districts2', e.detail.response);

        this._loadAllProgrammes();
      }

      _onDistrictErrorRequest(e){

      }

      _handleProgrammeResponse(e){
        console.log(JSON.stringify(e.detail.response));
        this.set('programmes', e.detail.response);
      }

      _onProgrammeErrorRequest(e){

      }

      _handleRegisterResponse(e){
        if(e.detail.response){
          this.user.yea_id = e.detail.response[0].yea_id;
          this.notifyPath('user.yea_id');

          JsBarcode(this.$.barcode, this.user.yea_id);

          this.$.step5.style = '';
          this.$.step5_wiz.style = '';

          this.$.step6.style = 'display:block;';
          this.$.step6_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
        }
      }

      _onRegister(e){
        this._saveDetails();
      }

      _onRegisterBack(e){
        this.$.step5.style = '';
        this.$.step5_wiz.style = '';

        this.$.step4.style = 'display:block;';
        this.$.step4_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
      }

      _onRegionChanged(e){
        this._loadDistricts(this.$.region_control.value);
      }

      _onRegion2Changed(e){
        this._loadDistricts2(this.$.region_control_2.value);
      }

      _onMaritalStatusChanged(e){
        if(this.$.m_status.value == 'Married'){
          this.$.spouse_control.style = '';
        }else{
          this.$.spouse_control.style = 'display:none;'
          this.user.spouse = '';
        }
      }

      _onSickChanged(e){
        if(this.$.sick.value == 'YES'){
          this.$.sick_box.style = '';
        }else{
          this.$.sick_box.style = 'display:none;';
        }
      }

      _handleValidateEmailResponse(e){
        if(e.detail.response){
          this._showError(this.$.email);
          return; 
        }else{
          this._showNormal(this.$.email);
          this._validatePhone();
        }
      }

      _handleValidePhoneResponse(e){
        if(e.detail.response){
          this._showError(this.$.phone);
          return;
        }else{
          this._showNormal(this.$.phone);


          this.$.step1.style = '';
          this.$.step1_wiz.style = ''

          this.$.step2.style = 'display:block';
          this.$.step2_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';

        }
      }

      _handleValideIdResponse(e){
        if(e.detail.response){
          this._showError(this.$.idn);
          return;
        }else{
          this._showNormal(this.$.idn);

          this.$.step2.style = '';
          this.$.step2_wiz.style = '';

          this.$.step3.style = 'display:block;';
          this.$.step3_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';

        }
      }

      _handleValideEzwichResponse(e){
        if(e.detail.response){
          this._showError(this.$.ezw);
          this._showError(this.$.ezw2);
          return;
        }else{

          this._makeDateCall();

          this._showNormal(this.$.ezw);
          this._showNormal(this.$.ezw2);

          this.$.step4.style = '';
          this.$.step4_wiz.style = '';

          this.$.step5.style = 'display:block;';
          this.$.step5_wiz.style = 'color:#d9230f; border:2px solid #d9230f; background-color:#ffffff;';
        }
      }

      _handleSickResponse(e){
        this.sicks = e.detail.response;
      }

      _onAgree(){
        this.$.info_page.style = 'display:none;'
        this.$.form_wizard.style = '';
      }

      _onDecline(){
        window.location.href = "https://www.yea.gov.gh/index.php/en/";
      }

      _onPrint(){
        window.print();
      }

      _makeDateCall(){
        this.$.date.url = config.baseUrl+'/utils/today';
        this.$.date.generateRequest();
      }

      _handleDateResponse(e){
        if(e.detail.response){
          this.user.reg_date = e.detail.response;
          console.log('REG Date ::: '+this.user.reg_date);
          this.notifyPath('user.reg_date');
        }
      }

      _onMonthChange(e){
        if(this.$.month_list.value == '09' || this.$.month_list.value == '04' || this.$.month_list.value == '06' || this.$.month_list.value == '11'){
          this.set('days', this.default_days2);
          this.notifyPath('days');
        }else if(this.$.month_list.value == '02'){
          this.set('days', this.default_days1);
          this.notifyPath('days');
        }else{
          this.set('days', this.default_days3);
          this.notifyPath('days');
        }

        if(this.$.month_list.value == '0'){
          this.$.day_list.disabled = true;
        }else{
          this.$.day_list.disabled = false;
        }
      }
    }

    window.customElements.define(RegApp.is, RegApp);
  </script>
</dom-module>
